{# Template de pel√≠culas por g√©nero - Extiende la plantilla base de la aplicaci√≥n #}
{% extends 'peliculas/base.html' %}

{# Define el t√≠tulo din√°mico de la p√°gina con el nombre del g√©nero #}
{% block title %}{{ genero.nombre }} - Cine Aventura{% endblock %}

{# Bloque principal de contenido de la p√°gina #}
{% block content %}
<div class="genre-page">
    {# Encabezado del g√©nero con informaci√≥n descriptiva #}
    <div class="genre-header">
        <div class="container">
            {# T√≠tulo del g√©nero (ej: Acci√≥n, Drama, Comedia) #}
            <h1 class="genre-title">{{ genero.nombre }}</h1>
            
            {# Descripci√≥n del g√©nero - Solo se muestra si existe #}
            {% if genero.descripcion %}
            <p class="genre-description">{{ genero.descripcion }}</p>
            {% endif %}
            
            {# Contador total de pel√≠culas en este g√©nero #}
            <p class="genre-count">{{ peliculas.paginator.count }} pel√≠culas encontradas</p>
        </div>
    </div>
    
    {# Contenedor principal con grid de pel√≠culas #}
    <div class="container">
        {# Grid responsivo de tarjetas de pel√≠culas #}
        <div class="movies-grid">
            {# Itera sobre cada pel√≠cula del g√©nero actual #}
            {% for pelicula in peliculas %}
            <div class="movie-card">
                {# Enlace a la p√°gina de detalle de la pel√≠cula #}
                <a href="{% url 'peliculas:detalle' pelicula.id %}" class="movie-link">
                    
                    {# Secci√≥n del p√≥ster de la pel√≠cula #}
                    <div class="movie-poster">
                        {# Muestra el p√≥ster si existe, sino muestra un placeholder #}
                        {% if pelicula.poster %}
                        <img src="{{ pelicula.poster }}" alt="{{ pelicula.titulo }}">
                        {% else %}
                        <div class="movie-poster-placeholder">
                            <span>üé¨</span>
                        </div>
                        {% endif %}
                        
                        {# Badge flotante con la calificaci√≥n promedio (formato: 7.5) #}
                        <div class="movie-rating">
                            ‚≠ê {{ pelicula.calificacion_promedio|floatformat:1 }}
                        </div>
                    </div>
                    
                    {# Informaci√≥n textual de la pel√≠cula #}
                    <div class="movie-info">
                        {# T√≠tulo de la pel√≠cula #}
                        <h3 class="movie-title">{{ pelicula.titulo }}</h3>
                        {# A√±o de estreno #}
                        <p class="movie-year">{{ pelicula.a√±o }}</p>
                    </div>
                </a>
            </div>
            
            {# Mensaje cuando no hay pel√≠culas en este g√©nero #}
            {% empty %}
            <p class="no-results">No se encontraron pel√≠culas en este g√©nero.</p>
            {% endfor %}
        </div>
        
        {# Sistema de paginaci√≥n - Solo se muestra si hay m√∫ltiples p√°ginas #}
        {% if peliculas.has_other_pages %}
        <div class="pagination">
            {# Enlace a la p√°gina anterior - Solo si existe p√°gina previa #}
            {% if peliculas.has_previous %}
            <a href="?page={{ peliculas.previous_page_number }}" class="pagination-link">‚Üê Anterior</a>
            {% endif %}
            
            {# Indicador de p√°gina actual y total de p√°ginas #}
            <span class="pagination-info">
                P√°gina {{ peliculas.number }} de {{ peliculas.paginator.num_pages }}
            </span>
            
            {# Enlace a la p√°gina siguiente - Solo si existe p√°gina siguiente #}
            {% if peliculas.has_next %}
            <a href="?page={{ peliculas.next_page_number }}" class="pagination-link">Siguiente ‚Üí</a>
            {% endif %}
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}